<div class="header__hamburger">
  <button htm-button 
    theme="plain"
    attr.aria-label="{{ 'button.open' | translate }} {{ 'frontpage.main_menu' | translate }}" 
    attr.aria-expanded="{{active}}" 
    (click)="toggleSidemenu()">
    <div class="toggle" [class.active]="active">
      <div class="bar first"></div>
      <div class="bar middle"></div>
      <div class="bar last"></div>
    </div>
  </button>
</div>
<a href="" class="header__logo pointer" role="link" attr.aria-label="{{'frontpage.lead' | translate}}">
  <!-- <icon glyph="logo" size="medium"></icon> -->
  <img aria-hidden="true" src="../../../assets/img/logo.svg"/>
</a>
<div class="header__assets">
  <div class="header__assets--grid">
    <div class="header__search">
      <icon glyph="search" size="default"></icon>
      <formItem
        titleDisabled="true"
        type="text"
        placeholder="Sisesta märksõna ja vajuta Enter"
        [(ngModel)]="search">
      </formItem>
    </div>
    <div class="header__actions">
      <button htm-button 
        [class.active]="modalService.modalOpened['search']"
        (click)="modalService.toggle('search')"
        theme="plain"
        attr.aria-label="{{ 'button.search' | translate }}">
        <icon aria-hidden="true" glyph="search" size="medium"></icon>
      </button>
      <button htm-button
        [class.active]="modalService.modalOpened['login']"
        (click)="modalService.toggle('login')"
        theme="plain"
        attr.aria-label="{{ 'button.login' | translate }}">
        <ng-container *ngIf="loginStatus else other;">
          <div class="label--logged">
            <icon aria-hidden="true" glyph="user" size="medium"></icon>
            <span>{{ user }}</span>
          </div>
        </ng-container>
        <ng-template #other>
          <icon aria-hidden="true" glyph="user" size="medium"></icon>
          <span>{{ 'button.login' | translate }}</span>
        </ng-template>
      </button>
    </div>
  </div>
</div>
<htm-modal id="search" title="{{ 'button.search' | translate }}" [bottomAction]="false">
  <modal-content id="search" *ngIf="modalService.modalOpened['search']">
    <formItem
      type="text"
      [(ngModel)]="search"
      title="Märksõna">
    </formItem>
    <button
      (blur)="modalService.focusLock()"
      htm-button
      style="margin: 1rem 0; width: 100%;">
        Otsi
    </button>
  </modal-content>
</htm-modal>
<htm-modal id="login" title="{{ 'button.login' | translate }}" [bottomAction]="false">
  <modal-content id="login" *ngIf="modalService.modalOpened['login']">
    <div class="login__wrapper">
      <div class="login__method">
        <button htm-button>{{ 'login_harid' | translate }}</button>
      </div>
      <labeled-separator type="login" label="või"></labeled-separator>
      <div class="login__method">
        <button htm-button>{{ 'login_tara' | translate }}</button>
      </div>
      <labeled-separator type="login" label="või"></labeled-separator>
      <div class="login__method">
        <div>
          <h2>{{ 'login_mobile' | translate }}</h2>
        </div>
        <div>
          <formItem
            type="text"
            [(ngModel)]="phone"
            title="{{ 'dashboard.contactPhone' | translate }}">
          </formItem>
        </div>
        <div>
          <button htm-button>{{ 'button.login' | translate }}</button>
        </div>
      </div> 
      <labeled-separator type="login" label="või"></labeled-separator>
      <div class="login__method">
        <div>
          <formItem
            type="text"
            [(ngModel)]="username"
            title="{{ 'login.username' | translate }}">
          </formItem>
        </div>
        <div>
          <formItem
            type="text"
            [(ngModel)]="phone"
            title="{{ 'login.password' | translate }}">
          </formItem>
        </div>
        <div>
          <button (blur)="modalService.focusLock()" htm-button>{{ 'button.login' | translate }}</button>
        </div>
      </div>
    </div>
  </modal-content>
</htm-modal>
