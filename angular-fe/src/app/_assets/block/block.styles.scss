@import "typography.scss";
@import "breakpoints.scss";

:host {
  display: block;
  border-top: $light-blue 0.625rem solid;
  background: $white;
  border-radius: $half-gutter;
  margin-bottom: 16px;

  &.block--orange {
    border-top-color: $dark-orange;
  }
  &.block--transparent {
    border-top: none;
  }

  @include break-on(xs, max) {
    border-radius: 0 0 $half-gutter $half-gutter;
  }
}

::ng-deep {
  block {
    .block__title {
      display: flex;
      color: $dark-gray;
      font-size: $small;
      justify-content: space-between;
      flex-direction: column;
      align-items: flex-start;

      h1 {
        all:unset;
      }

      &--border {
        border-bottom: $gray 0.0625rem solid;
      }

      &__text {
        flex-grow: 1;
        padding: 1.2rem $medium;
        text-transform: uppercase;
      }

      &__secondary__text {
        color: $black;
        padding: 0rem $medium;
        margin: 1rem 0 0rem 0;
        line-height: 1.33;
        font-size: $medium;
      }

      &__container {
        flex-direction: column;
      }

      &__tabs {
        height: 3.875rem;
        padding: 0 1.5rem;
        display: flex;
        flex-direction: row;
        gap: 8px;
        width: 100%;

        button {
          color: $blue;
          min-width: 5.75rem;
          appearance: none;
          font-size: .875rem;
          padding: 0 $gutter;
          font-family: 'Rubik', sans-serif;
          border: none;
          height: 100%;
          background: none;
          cursor: pointer;
          position: relative;
          overflow: hidden;
          vertical-align: top;
          @include break-on(sm, min) {
            &:hover {
              color: $light-green;
            }
          }

          &.active {
            &:after {
              content: '';
              position: absolute;
              left: -$small;
              right: -$small;
              bottom: 0;
              height: $half-gutter;
              background: $dark-orange;
              display: block;
            }

            color: $black;

            &:hover {
              color: $black;
            }
          }

          .button__contents {
            position: relative;
            z-index: 2;
            pointer-events: none;
            font-weight: 300;
          }
        }

        icon {
          display: block;
          margin-bottom: 0.125rem;
        }
      }

      &__middle-tabs {
        display: flex;
        flex-basis: 100%;
        justify-content: flex-start;
        margin: 0rem 1.5rem;
        margin-top: $small;
        border-bottom: .1875rem solid $light-gray;

        button {
          appearance: none;
          padding: 0 $small;
          border: none;
          background: none;
          cursor: pointer;
          position: relative;
          overflow: hidden;
          vertical-align: top;
          width: 25%;
          margin: 0;
          margin-bottom: -.1875rem;
          color: $blue;
          @include break-on(md, max) {
            width: 50%;
          }

          &.active {
            color: $black;

            &:after {
              content: '';
              position: absolute;
              left: -$small;
              right: -$small;
              bottom: 0;
              height: $half-gutter;
              background: $dark-orange;
              display: block;
            }
          }

          &:hover {
            icon, .title {
              color: #0F7B8A;
            }
          }

          .button__contents {
            position: relative;
            z-index: 2;
            pointer-events: none;

            .title, h2 {
              font-weight: 300;
              font-size: .875rem;
              line-height: 1.71;
              margin-bottom: $quarter;
              @include break-on(xs, max) {
                line-height: 1.5rem;
                margin: 0;
              }
            }
          }
        }

        @include break-on(xs, min) {
          icon {
            display: block;

            i {
              font-size: $medium !important;
              margin: $small 0 $gutter;
            }
          }
        }
      }
    }
    .block__content {
      display: block;
      padding: $medium;
      max-width: 100vw;
      line-height: 1.375rem;

      .progress-bar-text {
          display: block;
          font-size: 1rem;
          margin-block-end: 0.83em;
          margin-inline-start: 0;
          margin-inline-end: 0;
        }

      h1, h2, h3, h4, h5, h6, p {
        &:first-child {
          margin-top: 0;
        }

        &:last-child {
          margin-bottom: 0;
        }
      }

      img {
        max-width: 100%;
      }

      &:after {
        content: '';
        display: block;
        clear: both;
        height: 0.0625rem;
      }
    }

    .no__padding__top .block__content {
      padding: 0 $medium $medium;
    }

    @include break-on(xs, max) {
      & {
        border-radius: 0 0 $half-gutter $half-gutter !important;
      }
      .block__title {
        display: flex;
        flex-direction: column;
        align-items: unset;

        &__tabs, &__middle-tabs {
          padding: 0;
          margin: 0;
          display: flex;
          align-items: center;
          border: none;
          height: auto;

          button {
            min-width: auto;
            padding: .5rem 0;
            flex-grow: 1;
            flex-basis: 0;
            border: none;

            &.button--icon {
              min-width: 2.5rem;
              flex-grow: 0;
              height: 2.5rem;
              line-height: 1.5rem;
              align-items: center;
              color: $blue;
              padding: 0;

              &:first-child {
                margin-left: .5rem;
              }

              &:last-child {
                margin-right: .5rem;
              }
            }
          }

          .button__contents {
            display: block;
            line-height: 1.5rem;
            font-size: .875rem;

            icon {
              display: none;
            }
          }
        }

        &__middle-tabs {
          border-bottom: #c7c7c9 0.0625rem solid;
          padding-bottom: .1875rem;
          margin-top: 1rem;
        }
      }
    }
  }

  &.block--sidebar {
    padding: 1rem 1.5rem 1.5rem;
    border-top: $orange 0.625rem solid;
    h1 {
      color: $black;
      font-size: 1.5rem;
      font-weight: 500;
      line-height: 1.33;
    }

    .block__title--border {
      border: 0;
    }

    .block__title__text {
      padding: 0;
      text-transform: none;
    }

    block-title {
      font-size: 1.25rem;
      line-height: 1.875rem;
      color: $black;
      font-weight: 500;

      h1 {
        font-size: 1.25rem !important;
      }
    }

    .block__content {
      padding: 0;

      &:after {
        content: none;
      }
    }

    @include break-on(sm, max) {
      border-radius: 0 0 $half-gutter $half-gutter;
      margin-bottom: 0;
    }
  }

  @include break-on(sm, max) {
    &.block-content--no-padding .block__content {
      padding-left: 0;
      padding-right: 0;
    }
  }

  .description {
    line-height: 1.375rem;
    word-break: break-word;

    a[target="_blank"]::after {
      content: "";
      background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 24 24' style='enable-background:new 0 0 24 24%3B' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M16 22H5c-1.7 0-3-1.3-3-3V8c0-1.7 1.3-3 3-3h6c0.6 0 1 0.4 1 1s-0.4 1-1 1H5C4.4 7 4 7.4 4 8v11c0 0.6 0.4 1 1 1h11c0.6 0 1-0.4 1-1v-6c0-0.6 0.4-1 1-1s1 0.4 1 1v6C19 20.7 17.7 22 16 22z'/%3E%3C/g%3E%3Cg%3E%3Cpath d='M21 10c-0.6 0-1-0.4-1-1V4h-5c-0.6 0-1-0.4-1-1s0.4-1 1-1h6c0.6 0 1 0.4 1 1v6C22 9.6 21.6 10 21 10z'/%3E%3C/g%3E%3Cg%3E%3Cpath d='M10 15c-0.3 0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1 0-1.4l11-11c0.4-0.4 1-0.4 1.4 0s0.4 1 0 1.4l-11 11C10.5 14.9 10.3 15 10 15z'/%3E%3C/g%3E%3C/svg%3E");
      position: relative;
      top: .125rem;
      left: .125rem;
      width: 1rem;
      height: 1rem;
      display: inline-block;
    }

    ul {
      padding-left: 1rem;
    }

    ol {
      list-style-position: inside;
      padding-left: 0;
    }
  }
}
