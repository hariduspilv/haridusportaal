query studyProgrammeList(
  $sortDirection: SortOrder, $sortField: String, $lang: LanguageId!,
  $offset: Int, $limit: Int, $title: String, $titleEnabled: Boolean, $location: String, $locationEnabled: Boolean,
  $type: [String], $typeEnabled: Boolean, $level: [String], $levelEnabled: Boolean,
  $language: [String], $languageEnabled: Boolean, $school: String, $schoolEnabled: Boolean,
  $iscedf_broad: [String], $iscedf_broadEnabled: Boolean, $iscedf_narrow: [String], $iscedf_narrowEnabled: Boolean,
  $iscedf_detailed: [String], $iscedf_detailedEnabled: Boolean
) {
  nodeQuery: CustomElasticQuery(
    offset: $offset, limit: $limit,
    sortField: $sortField, sortDirection: $sortDirection,
    elasticsearch_index: ["elasticsearch_index_drupaldb_study_programmes"],
    filter: {
      conjunction: AND, conditions: [
        {operator: LIKE, field: "field_school_search_address", value: [$location], language: $lang, enabled: $locationEnabled},
        {operator: LIKE, field: "field_school_name", value: [$school], language: $lang, enabled: $schoolEnabled},
        {operator: IN, field: "field_iscedf_board", value: $iscedf_broad, language: $lang, enabled: $iscedf_broadEnabled},
        {operator: IN, field: "field_iscedf_narrow", value: $iscedf_narrow, language: $lang, enabled: $iscedf_narrowEnabled},
        {operator: IN, field: "tid_2", value: $iscedf_detailed, language: $lang, enabled: $iscedf_detailedEnabled},
        {operator: IN, field: "field_teaching_language", value: $language, language: $lang, enabled: $languageEnabled},
        {operator: IN, field: "tid_1", value: $level, language: $lang, enabled: $levelEnabled},
        {operator: IN, field: "tid", value: $type, language: $lang, enabled: $typeEnabled},
        {operator: EQUAL, field: "content_type", value: ["study_programme"], language: $lang},
        {operator: EQUAL, field: "status", value: "1"},
        {operator: EQUAL, field: "langcode", value: [$lang]}
      ],
      groups:
      {conjunction: OR, conditions: [
        {operator: LIKE, field: "field_short_description", value: [$title], language: $lang, enabled: $titleEnabled},
        {operator: LIKE, field: "title", value: [$title], language: $lang, enabled: $titleEnabled},
        {operator: LIKE, field: "field_degree_or_diploma_awarded", value: [$title], language: $lang, enabled: $titleEnabled},
        {operator: LIKE, field: "field_specialization", value: [$title], language: $lang, enabled: $titleEnabled}
      ]}
    }) {
    count
    entities {
      nid: Nid
      entityLabel: Title
      entityUrl: EntityPath
      fieldSchoolWebsite: FieldSchoolWebsite
      fieldSchoolContactEmail: FieldSchoolContactEmail
      fieldSchoolContactPhone: FieldSchoolContactPhone
      fieldSpecialization: FieldSpecialization
      fieldDegreeOrDiplomaAwarded: FieldDegreeOrDiplomaAwarded
      fieldShortDescription: FieldShortDescription
      fieldSchoolAddress: FieldSchoolAddress
      fieldSchoolSearchAddress: FieldSchoolSearchAddress
      fieldSchoolEntityId: Nid1
      fieldSchoolName: FieldSchoolName
      fieldTeachingLanguage: FieldTeachingLanguage
      fieldStudyProgrammeType: FieldStudyProgrammeType
      fieldDuration: FieldDuration
      fieldAccreditationStatus: FieldAccreditationStatus
      fieldAccreditationValidUntil: FieldAccreditationValidUntil
      fieldStudyProgrammeLevel: FieldStudyProgrammeLevel
      fieldIscedfBoard: FieldIscedfBoard
      fieldIscedfDetailed: FieldIscedfDetailed
      fieldIscedfNarrow: FieldIscedfNarrow
      fieldStudyProgrammeTypeTid: Tid
    }
  }
}
