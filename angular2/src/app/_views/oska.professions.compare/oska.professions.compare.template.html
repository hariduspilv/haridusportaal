
<div><breadcrumbs></breadcrumbs></div>
<div class="main-container">
  <mat-spinner *ngIf="!list && loading"></mat-spinner>
  <div class="row" *ngIf="list && !loading">
    <div class="col-12 sm-12">
      <div class="block">
        <div class="block-title">{{ 'oskaProfessions.label' | translate }}</div>
        <div class="row">
          <div class="col sm-10 flex">
            <h1 class="block-heading">{{ 'oskaProfessions.compare_label' | translate | titleCase }}</h1>
          </div>
          <div class="col sm-2 flex action--back">
            <a href="javascript:void(0)" [routerLink]="back()">
              <span class="sm-show">{{ 'button.back' | translate }}</span>
              <span class="sm-hide">{{ 'button.back_to_professions' | translate }}</span>
            </a>
          </div>
        </div>
        <div class="scrollable">
          <div class="scrollable__rectangle scrollable__rectangle--left pointer" id="scrollableLeft" *ngIf="!elemAtStart" 
            (touchstart)="tableService.scrollStart('tableRef')" 
            (mousedown)="tableService.scrollStart('tableRef')" 
            (touchend)="tableService.scrollEnd()" 
            (mouseup)="tableService.scrollEnd()">
            <span class="htm-icon">keyboard_arrow_left</span>
          </div>
          <div class="scrollable__rectangle scrollable__rectangle--right pointer" id="scrollableRight" *ngIf="tableOverflown" 
            (touchstart)="tableService.scrollStart('tableRef', true)"
            (mousedown)="tableService.scrollStart('tableRef', true)"
            (touchend)="tableService.scrollEnd(true)"
            (mouseup)="tableService.scrollEnd(true)">
            <span class="htm-icon">keyboard_arrow_right</span>
          </div>
          <div class="scrollable__table" id="tableRef" (scroll)="tableOverflown = tableService.isOverflownWhileScrolling($event); elemAtStart = tableService.isElemAtStart('tableRef');setScrollPos('tableRef')">
            <table class="scrollableTable">
              <tbody>
                <tr *ngIf="list">
                  <td class="firstCell centered bold layoutCell" [class.borderless]="fixedLabelExists" [class.lastCell]="!fixedLabelExists" *ngFor="let item of list"
                  [class.withBottom]="!graduatesToJobsFields.length && !finalFieldsArr.length && !paymentFields.length && !employedChangeFields.length && !employedFields.length && !progressFields.length && !oskaFieldsArr.length && !fixedLabelExists">
                    <a [routerLink]="item.entityUrl.path" attr.aria-label="{{item.title}}">{{ item.title | titleCase }}</a>
                  </td>
                </tr>
                <tr *ngIf="list && fixedLabelExists">
                  <td *ngFor="let item of list" class="lastCell centered"
                    [class.withBottom]="!graduatesToJobsFields.length && !finalFieldsArr.length && !paymentFields.length && !employedChangeFields.length && !employedFields.length && !progressFields.length && !oskaFieldsArr.length">
                    <span class="important-pill" *ngIf="item.fieldFixedLabel">{{ 'fieldFixedLabel.label' | translate }}</span>
                  </td>
                </tr>
                <tr *ngIf="list && oskaFieldsArr.length" class="shade">
                  <td [attr.colspan]="list.length" class="dark center">{{ 'oskaProfessions.fields' | translate | uppercase }}</td>
                </tr>
                <tr *ngFor="let elem of oskaFieldsArr; let childInd = index; let last = last;">
                  <ng-container *ngFor="let item of list; let ind = index;">
                    <td [class.firstCell]="childInd === 0" [class.groupCell]="!last" [class.lastCell]="last" 
                      [class.withBottom]="last && !graduatesToJobsFields.length && !finalFieldsArr.length && !paymentFields.length && !employedChangeFields.length && !employedFields.length && !progressFields.length">
                      <ng-container *ngIf="oskaFields[ind]">
                        <span *ngIf="!oskaFields[ind][childInd]"></span>
                        <span *ngIf="oskaFields[ind][childInd]">{{oskaFields[ind][childInd].entity.title}}</span>
                      </ng-container>
                      <ng-container *ngIf="!oskaFields[ind]">
                        <span></span>
                      </ng-container>
                    </td>
                  </ng-container>
                </tr>
                <tr class="shade" *ngIf="list && progressFields.length">
                  <td [attr.colspan]="list.length" class="dark center">{{ 'oska.competition' | translate | uppercase }}</td>
                </tr>
                <tr *ngIf="progressFields && progressFields.length">
                  <td class="firstCell lastCell xHidden" [class.withBottom]="!graduatesToJobsFields.length && !finalFieldsArr.length && !paymentFields.length && !employedChangeFields.length && !employedFields.length" *ngFor="let item of progressFields; let ind = index;">
                    <progress-bar [id]="ind" *ngIf="item && item > 0 && item < 6" [level]="item" [status]="competitionLabel[ind]" labelStart="{{'oska.simple' | translate}}" labelEnd="{{'oska.difficult' | translate}}"></progress-bar>
                  </td>
                </tr>
                <tr class="shade" *ngIf="list && employedFields.length">
                  <td [attr.colspan]="list.length" class="dark center">{{ 'oska.fieldNumberEmployed' | translate | uppercase }}</td>
                </tr>
                <tr *ngIf="list && employedFields.length">
                  <td class="firstCell lastCell" [class.withBottom]="!graduatesToJobsFields.length && !finalFieldsArr.length && !paymentFields.length && !employedChangeFields.length" *ngFor="let item of employedFields;">
                    <span *ngIf="item">{{ formatNumber(item, 'et') }}</span>
                    <span *ngIf="!item"></span>
                  </td>
                </tr>
                <tr class="shade" *ngIf="list && employedChangeFields.length">
                  <td [attr.colspan]="list.length" class="dark center">{{ 'oska.numberEmployedChange' | translate | uppercase }}</td>
                </tr>
                <tr *ngIf="list && employedChangeFields.length">
                  <td class="firstCell lastCell" [class.withBottom]="!graduatesToJobsFields.length && !finalFieldsArr.length && !paymentFields.length" *ngFor="let item of employedChangeFields;">
                    <div class="flex centered final" *ngIf="item && item > 0 && item < 6">
                      <div class="{{'icon-wrapper'}} {{trendingValues[item - 1].class}}"><span class="htm-icon" aria-hidden="true">{{trendingValues[item - 1].icon}}</span></div>
                      <div class="flex-text"><span role="text" attr.aria-label="{{trendingValues[item - 1].text | translate}}">{{trendingValues[item - 1].text | translate}}</span></div>
                    </div>
                    <div *ngIf="!(item && item > 0 && item < 6)"></div>
                  </td>
                </tr>
                <tr class="shade" *ngIf="list && paymentFields.length">
                  <td [attr.colspan]="list.length" class="dark center">{{ 'oska.wage' | translate | uppercase }}</td>
                </tr>
                <tr *ngIf="list && paymentFields.length">
                  <td class="firstCell lastCell" [class.withBottom]="!graduatesToJobsFields.length && !finalFieldsArr.length" *ngFor="let item of paymentFields;">
                    <span *ngIf="item">{{ formatNumber(item, 'et') }} â‚¬</span>
                    <span *ngIf="!item"></span>
                  </td>
                </tr>
                <tr class="shade" *ngIf="list && graduatesToJobsFields.length">
                  <td [attr.colspan]="list.length" class="dark center">{{ 'oska.graduation_to_jobs_rate' | translate | uppercase }}</td>
                </tr>
                <tr *ngIf="list && graduatesToJobsFields.length">
                  <td class="firstCell lastCell" [class.withBottom]="!finalFieldsArr.length" *ngFor="let item of graduatesToJobsFields;">
                    <div class="flex centered final" *ngIf="item && item > 0 && item < 6">
                      <div class="{{'icon-wrapper'}} {{graduatesToJobsValues[item - 1].class}}"><span class="icon" aria-hidden="true"></span></div>
                      <div class="flex-text"><span role="text" attr.aria-label="{{graduatesToJobsValues[item - 1].text | translate}}">{{graduatesToJobsValues[item - 1].text | translate}}</span></div>
                    </div>
                    <div *ngIf="!(item && item > 0 && item < 6)"></div>
                  </td>
                </tr>
                <tr class="shade" *ngIf="list && finalFieldsArr.length">
                  <td [attr.colspan]="list.length" class="dark center">{{ 'sidebar.pros_and_cons' | translate | uppercase }}</td>
                </tr>
                <tr class="slim" [class.firstSlim]="childInd === 0" *ngFor="let elem of finalFieldsArr; let childInd = index; let last = last;">
                  <ng-container *ngFor="let item of list; let ind = index;">
                    <td [class.groupCell]="!last" [class.lastCell]="last" [class.withBottom]="last" [class.another]="childInd > 0 && finalFields[ind][childInd] && finalFields[ind][childInd].type !== finalFields[ind][childInd - 1].type">
                      <ng-container *ngIf="finalFields[ind]">
                        <span *ngIf="!finalFields[ind][childInd]"></span>
                        <ng-container *ngIf="finalFields[ind][childInd]">
                          <div class="flex centered">
                            <div aria-hidden="true" class="icon-wrapper"
                              [class.top]="finalFields[ind][childInd].type === 'pro'"
                              [class.neutral]="finalFields[ind][childInd].type === 'neutral'"
                              [class.bottom]="finalFields[ind][childInd].type === 'con'">
                              <span *ngIf="finalFields[ind][childInd].type === 'pro'" class="htm-icon">vertical_align_top</span>
                              <span *ngIf="finalFields[ind][childInd].type === 'neutral'" class="htm-icon">vertical_align_center</span>
                              <span *ngIf="finalFields[ind][childInd].type === 'con'" class="htm-icon">vertical_align_bottom</span>
                            </div>
                            <div>{{finalFields[ind][childInd].value}}</div>
                          </div>
                        </ng-container>
                      </ng-container>
                      <ng-container *ngIf="!finalFields[ind]">
                        <span></span>
                      </ng-container>
                    </td>
                  </ng-container>
                </tr>
                <tr>
                  <td class="centered" *ngFor="let item of list; let i = index;">
                    <a attr.aria-label="{{'button.remove_from_comparison' | translate}}" href="javascript:void(0);" (click)="removeItemFromList(item.nid, 'oskaProfessions.compare'); setDeleteText(i)">{{ 'button.remove_from_comparison' | translate}}</a>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="notification--alert" role="alert">
              <span>{{ deleteText }} <span *ngIf="deleteText">{{ 'oskaProfessions.removed_from_comparison' | translate }}</span></span>
            </div>
          </div>
        </div>
      </div><!--/block-->
    </div><!--/col-8-->
  </div><!--/row-->
</div>