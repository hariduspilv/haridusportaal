<breadcrumbs></breadcrumbs>
<div class="sm-show text-right filter-control">
  <a href="javascript:void(0);" (click)="showFilter = !showFilter">
    <span *ngIf="!showFilter">{{ 'button.filter' | translate }}</span>
    <span *ngIf="showFilter">{{ 'button.filter_close' | translate }}</span>
  </a> 
</div>
<form (submit)="filterSubmit($event)" class="filter-wrapper" *ngIf="showFilter">
  <div class="main-container">
    <div class="row form-first-row" [class.short-filter]="!filterFull">
      <div class="col-4 sm-12 form-col">
        <div class="round-input__wrapper" [class.complete]="filterFormItems.titleValue">
          <span class="round-input__title">{{ 'search.keyword' | translate }}</span>
          <div class="round-input__field-wrapper">
            <input class="round-input__field" placeholder="{{ 'search.keyword' | translate }}" [(ngModel)]='filterFormItems.titleValue' name="titleValue" />
          </div>
        </div><!--/round-inpuit__wrapper-->
      </div><!--/col-4-->

      <div class="col-5 sm-12 form-col">
        <div class="round-input__wrapper">
          <mat-form-field *ngIf="FilterOptions">
            <mat-select placeholder="{{ 'frontpage.dashboard_tabs_certificates_field' | translate }}" [(ngModel)]='filterFormItems.oskaFieldValue' name="type">
              <mat-option>{{ 'button.all' | translate }}</mat-option>
              <mat-option *ngFor="let type of FilterOptions.oskaFieldValue" [value]="type.nid">
                {{type.title}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div><!--/col-4-->

      <div class="col-3 align-end text-right sm-12 inline-flex form-col" *ngIf="!filterFull">
        <div class="align-center filter-state sm-hide">       
          <a role="button" href="javascript:void(0);" (click)="filterFull = !filterFull" aria-expanded="false">
            <span>{{ 'button.search_detailed' | translate }}</span>
          </a>
        </div>
        <div class="button-row">
          <button role="button" mat-raised-button color="primary">{{ 'button.search' | translate }}</button>
        </div>
      </div><!--/col-3-->
    </div><!--/row-->
    <ng-container *ngIf="filterFull">
      <div class="row form-additional-row">
        <div class="col-9 sm-12 form-col">
          <div class="round-input__wrapper">
            <mat-form-field *ngIf="FilterOptions" >
              <mat-select placeholder="{{ 'button.sort' | translate }}" [(ngModel)]='filterFormItems.sort' name="sort">
                <mat-option>{{ 'button.all' | translate }}</mat-option>
                <mat-option  *ngFor="let level of FilterOptions.sort" [value]="sort.tid">
                  {{level.entityLabel}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div><!--/col-9-->
      </div>
      <div class="row form-additional-row no-gutter">
        <div class="col-9 sm-12 form-col">
          <div class="custom-checkbox">
            <mat-checkbox [(ngModel)]="filterFormItems.fixedLabelValue" name="fixedLabelValue"> {{ 'fieldFixedLabel.slogan' | translate }}</mat-checkbox>
          </div>
        </div><!--/col-9-->
        <div class="col-3 align-end text-right sm-12 inline-flex form-col">
          <div class="align-center filter-state sm-hide">       
            <a role="button" href="javascript:void(0);" (click)="filterFull = !filterFull" aria-expanded="true">
              <span>{{ 'button.search_brief' | translate }}</span>
            </a>
          </div>
          <div class="button-row">
            <button role="button" mat-raised-button color="primary">{{ 'button.search' | translate}}</button>
          </div>
        </div><!--/col-3-->
      </div><!--/row-->
    </ng-container>
  </div>
</form>
<div class="studyProgramme main-container">
  <div class="studyProgramme__list-head">
    <div class="studyProgramme__head">
      <div class="studyProgramme__title text-left">{{ 'oskaProfessions.label' | translate | uppercase }}</div>
    </div>
  </div><!--/studyProgramme__list-head-->

  <div class="spinner-wrapper" *ngIf="!data"><mat-spinner></mat-spinner></div>

  <div role="alert" *ngIf="data && data.length == 0" class="no-results">
    {{ errMessage ? errMessage : 'news.no_results' | translate }}
  </div>

  <div *ngIf="data && data.length > 0">
  
    <ng-container *ngFor="let item of data; let i = index">
      <div class="studyProgramme__item">
        <div class="studyProgramme__item__titlebox">
          <div class="col-grow">
            <!-- <div class="studyProgramme__item__head sm-hide">{{ 'oskaProfessions.label' | uppercase }}</div> -->
            <span>
              <a id="{{i}}" href="javascript:void();" attr.aria-label="{{ item.title }}" [routerLink]="item.entityUrl.path" class="studyProgramme__item__title"><h1>{{ item.title }}</h1></a>
              <span role="term" attr.aria-label="{{'fieldFixedLabel.label' | translate}}" class="important-pill" *ngIf="item.fieldFixedLabel">{{'fieldFixedLabel.label' | translate}}</span>
            </span>
          </div><!--col-9-->
          <div class="col sm-hide">
            <compare [id]="item.nid" localStorageKey="oskaProfessions.compare"></compare>
          </div>
        </div>
        <div class="inline__items sm-hide">
          <ng-container *ngIf="item.fieldSidebar">
            <ng-container *ngFor="let elem of item.fieldSidebar.entity.fieldOskaField; let ind = index; let last = last;">
              <ng-container *ngIf="ind < 3">
                <div class="item item--inline">
                  <a href="javascript:void(0)" tabindex="0" attr.aria-label="{{ elem.entity.title }}" [routerLink]="elem.entity.entityUrl.path">{{ elem.entity.title }}</a>
                </div>
                <span aria-hidden="true" class="bar" *ngIf="elem.entity.title && ind !== 2 && !last">|</span>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="item.reverseOskaMainProfessionOskaIndicatorEntity.entities && item.reverseOskaMainProfessionOskaIndicatorEntity.entities.length">
            <ng-container *ngFor="let elem of item.reverseOskaMainProfessionOskaIndicatorEntity.entities; let ind = index;">
              <ng-container *ngIf="ind < 2">
                <span class="bar" *ngIf="(ind === 0 && item.fieldSidebar) || ind > 0">|</span>
                <span class="item">{{ elem.oskaIndicator | titleCase }}: {{ elem.value | titleCase }}</span>
              </ng-container>
            </ng-container>
          </ng-container>
        </div>
      </div><!--/studyProgramme__item-->
    </ng-container><!--/list repeat-->
  </div><!--/list-->

</div><!--/studyProgramme-->
  
<div class="text-center actions snackBar">
  <ng-container *ngIf="!listEnd && data && data.length">
    <mat-spinner *ngIf="loading" diameter="20" style="margin:0 auto;"></mat-spinner>
    <button role="button" mat-raised-button color="primary" (click)="loadMore()" *ngIf="!loading" attr.aria-label="{{'button.load_more' | translate}}">
      {{ "button.load_more" | translate }}
    </button>
  </ng-container>
</div>