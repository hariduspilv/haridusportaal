<breadcrumbs></breadcrumbs>

<div class="main-container">
  <mat-spinner *ngIf="!data && !error"></mat-spinner>

  <div class="row" *ngIf="data">
    <div class="col-8 sm-12">
      <div class="block padding-block lg-bottom--extra">

        <div class="block-title">{{ 'studyProgramme.label' | translate }}</div>
        <div class="row title sm-flex">
          <div class="col-7 sm-10">
            <h1 *ngIf="data.entityLabel">{{ data.entityLabel }}</h1>
          </div><!--/col-8-->
          
          <div class="col-2 flex text-right">
            <div class="fill"></div>
            <favourites [id]="data.nid" [title]="data.title"></favourites>
            <share [title]="data.entityLabel"></share>
          </div>

          <div class="col-12 flex">
            <compare [id]="data.nid" localStorageKey="studyProgramme.compare"></compare>
          </div>

        </div><!--/row-->
        <div class="row title sm-hide">
          <div class="col-7 sm-10">
            <h1 *ngIf="data.entityLabel">{{ data.entityLabel }}</h1>
          </div><!--/col-8-->
          <div class="col-5 flex text-right">
            <div class="fill"></div>
            <compare [id]="data.nid" localStorageKey="studyProgramme.compare"></compare>
            <favourites [id]="data.nid" [title]="data.entityLabel"></favourites>
            <share [title]="data.entityLabel"></share>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr *ngIf="data.fieldEducationalInstitution">
                    <th>Õppeasutuse nimi</th>
                    <th>{{ data.fieldEducationalInstitution.entity.entityLabel | titleCase }}</th>
                  </tr>
                </thead>
                <tbody>

                  <tr *ngIf="data.fieldEducationalInstitution">
                    <td>Registrikood</td>
                    <td>{{ data.fieldEducationalInstitution.entity.fieldRegistrationCode }}</td>
                  </tr>

                  <tr *ngIf="data.fieldStudyProgrammeLevel">
                    <td>Õppekava tase</td>
                    <td>{{ data.fieldStudyProgrammeLevel.entity.entityLabel | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldDegreeOrDiplomaAwarded">
                    <td>Omistatav kraad või diplom</td>
                    <td>{{ data.fieldDegreeOrDiplomaAwarded.entity.entityLabel | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldSpecialization">
                    <td>Spetsialiseerumine</td>
                    <td>{{ data.fieldSpecialization | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldIscedfBoard">
                    <td>Õppevaldkond</td>
                    <td>{{ data.fieldIscedfBoard.entity.entityLabel | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldIscedfNarrow">
                    <td>Õppesuund</td>
                    <td>{{ data.fieldIscedfNarrow.entity.entityLabel | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldIscedfDetailed">
                    <td>Õppekavarühm</td>
                    <td>{{ data.fieldIscedfDetailed.entity.entityLabel | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldShortDescription">
                    <td>Lühikirjeldus</td>
                    <td>{{ data.fieldShortDescription | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldTeachingLanguage">
                    <td>Õppekeel(ed)</td>
                    <td>
                      <ng-container *ngFor="let item of data.fieldTeachingLanguage; let i = index;">
                          <ng-container *ngIf="i > 0">, </ng-container>{{ item.entity.entityLabel | titleCase }}
                      </ng-container>
                    </td>
                  </tr>

                  <tr *ngIf="data.fieldAmount">
                    <td>Õppekava maht</td>

                    <td>{{ data.fieldAmount }} {{ data.fieldAmountUnit | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldPracticalTrainingAmount">
                    <td>Praktika maht</td>
                    <td>{{ data.fieldPracticalTrainingAmount }} {{ data.fieldAmountUnit }}</td>
                  </tr>

                  <tr *ngIf="data.fieldDurationYears">
                    <td>Nominaalkestus</td>
                    <td>{{ data.fieldDurationYears }} aastat <ng-container *ngIf="data.fieldDurationMonths && data.fieldDurationMonths !== 0">{{ data.fieldDurationMonths }} kuud</ng-container></td>
                  </tr>

                  <tr *ngIf="data.fieldAdmissionStatus">
                    <td>Vastuvõtu olek</td>
                    <td>{{ data.fieldAdmissionStatus | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldAccreditationStatus">
                    <td>Akrediteerimise otsus</td>
                    <td>{{ data.fieldAccreditationStatus | titleCase }}</td>
                  </tr>

                  <tr *ngIf="data.fieldAccreditationValidUntil">
                    <td>Akrediteerimise otsuse kehtivuse lõpp</td>
                    <td>{{ data.fieldAccreditationValidUntil.unix * 1000 | date:"dd.MM.yyyy" }}</td>
                  </tr>

                  <tr *ngIf="data.fieldWebPageAddress">
                    <td>Õppekava kirjeldava veebilehe aadress</td>
                    <td><a href="{{ data.fieldWebPageAddress.uri }}" target="_blank">Vaata õppekava kirjeldust õppeasutuse veebilehel</a></td>
                  </tr>

                  <tr *ngIf="data.fieldQualificationStandardId && data.fieldQualificationStandardId.length > 0">
                    <td>Kutsestandard(id)</td>
                    <td>
                      <ng-container *ngFor="let item of data.fieldQualificationStandardId">
                        {{ item.entity.entityLabel | titleCase }}<br />
                      </ng-container>
                    </td>
                  </tr>

                </tbody>
              </table>
            </div><!--/table-wrapper-->
          </div>
        </div>
      </div><!--/block-->

      <ng-container>
        <div class="text-center actions snackBar sm-hide" *ngIf="!displayRelatedStudyProgrammes">
          <button mat-raised-button color="primary" (click)="displayRelatedStudyProgrammes = true" >Vaata sarnaseid erialasid</button>
        </div><!--/text-center-->
        <related-studyprogrammes class="sm-hide" *ngIf="displayRelatedStudyProgrammes" [studyProgrammeId]="data.nid"></related-studyprogrammes>
      </ng-container>
      
    </div><!--/col-8-->
    <div class="col-4 sm-12">
      <div class="block padding-block border-orange">
        <h2>Kontakt</h2>
        <p>
          <ng-container *ngIf="data.fieldEducationalInstitution.entity">{{ data.fieldEducationalInstitution.entity.entityLabel | titleCase }}<br /></ng-container>
          <ng-container tabindex="0" *ngIf="data.fieldEducationalInstitution.entity.fieldSchoolContactPhone"><span role="text" tabindex="0" attr.aria-label="{{' Phone: '}} {{ data.fieldEducationalInstitution.entity.fieldSchoolContactPhone }}"> {{data.fieldEducationalInstitution.entity.fieldSchoolContactPhone }}</span><br /></ng-container>
          <ng-container *ngIf="data.fieldEducationalInstitution.entity.fieldSchoolContactEmail"><a tabindex="0" attr.aria-label="{{' E-mail: '}} {{ data.fieldEducationalInstitution.entity.fieldSchoolContactEmail }} " href="mailto:data.fieldEducationalInstitution.entity.fieldSchoolContactEmail">{{ data.fieldEducationalInstitution.entity.fieldSchoolContactEmail }}</a><br /></ng-container>
          <ng-container *ngIf="data.fieldSchoolWebsite"><a  tabindex="0" attr.aria-label="{{' Website: '}} {{ data.fieldSchoolWebsite | removeProtocol }}" href="{{ data.fieldSchoolWebsite | url }}" target="_blank">{{ data.fieldSchoolWebsite | removeProtocol }}</a></ng-container>
        </p>
      </div><!--/block-->
    

      <ng-container *ngFor="let item of data.fieldEducationalInstitution.entity.fieldSchoolLocation; let i = index">
        <div class="block padding-block border-orange mob-bottom" *ngIf="item.entity.fieldLocationType == 'L'">
          
          <map-wrapper tabindex="-1" [latitude]="parseFloat(item.entity.fieldCoordinates.lat)" [longitude]="parseFloat(item.entity.fieldCoordinates.lon)" zoom="11"></map-wrapper>

          <h2>Juriidiline aadress</h2>
          <p>{{ item.entity.fieldAddress | titleCase }}</p>
        </div><!--/block-->
      </ng-container>
      <ng-container>
        <div class="text-center actions snackBar sm-show" *ngIf="!displayRelatedStudyProgrammes">
          <button role="button" mat-raised-button color="primary" (click)="displayRelatedStudyProgrammes = true">Vaata sarnaseid erialasid</button>
        </div><!--/text-center-->
        <related-studyprogrammes class="sm-show" *ngIf="displayRelatedStudyProgrammes" [studyProgrammeId]="data.nid"></related-studyprogrammes>
      </ng-container>
    </div><!--/col-4-->
  </div><!--/row-->
</div>