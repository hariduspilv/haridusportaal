<div><breadcrumbs *ngIf="!inputData"></breadcrumbs></div>
<div class="main-container">
  <div class="row wrapper__row" *ngIf="error">
    <div class="col-8 sm-12">
      <div class="block border-blue padding-block">
        <h1>{{ 'oska.results' | translate }}</h1>
        <div class="text-center actions__error">
          <div class="alert" role="alert">{{'errors.request' | translate}}</div>
        </div><!--/text-center-->
      </div>
    </div>
  </div>
  <mat-spinner *ngIf="!data && !error"></mat-spinner>
  <div class="row wrapper__row" *ngIf="data">
    <div class="col-8 sm-12">
      <div class="block border-blue padding-block">
        <div class="block__head no-border">
          <div class="block__head__title">{{ 'oska.results' | translate | uppercase }}</div>
        </div><!--/block__head-->

        <h1>{{ data['entityLabel'] }}</h1>
        <div class="mininav flex text-right">
          <favourites *ngIf="!userLoggedOut" [state]="data.isFavorite" [id]="data.nid" [title]="data.entityLabel"></favourites>
          <share></share>
        </div>  
        <div class="short" [attr.aria-label]="'description.short' | translate">
          {{ data['fieldResultPageIntroduction']}}
        </div>

        <!-- field image-->
        <ng-container *ngIf="data.fieldResultPagePicture">
          <ng-container *ngIf="data.fieldResultPagePicture.length > 0">
            <div class="article-image pull-right" *ngFor="let picture of data.fieldResultPagePicture">
              <img src="{{ picture.derivative.url }}" alt="{{ picture.alt }}" title="{{ picture.title }}" style="max-width:100%;" />
              <div aria-hidden="true" class="image-alt-text" *ngIf="picture.title">{{ picture.title }}</div>
            </div><!--/fieldOskaFieldPicture-->
          </ng-container>
        </ng-container>

        <div [innerHTML]="data['body']['value']" attr.aria-label="{{'description' | translate}}" class="description" ></div>

        <ng-container *ngIf="data.fieldResultPageLinks || data.fieldResultPageFiles">
          <ng-container *ngIf="data.fieldResultPageLinks.length > 0 || data.fieldResultPageFiles.length > 0" class="external-links">
            <ul class="external-links">
              <li *ngFor="let item of data.fieldResultPageLinks">
                <a href="{{ item.url.path }}" target="_blank" attr.aria-label="{{ item.title }}" ><span class="htm-icon">launch</span>{{ item.title }}</a>
              </li>
              <li *ngFor="let item of data.fieldResultPageFiles">
                <a href="{{ item.entity.url }}" target="_blank" attr.aria-label="{{ item.description || item.entity.entityLabel }}" ><span class="htm-icon">file_copy</span>{{ item.description || item.entity.entityLabel }}</a>
              </li>
            </ul>
          </ng-container>
        </ng-container>

        <ng-container *ngIf="data.fieldResultPageVideo">
          <video-component [videos]="[data.fieldResultPageVideo]"></video-component>
        </ng-container>

        <ng-container *ngIf="data.fieldResultPageGraph">
          <chart [data]="data.fieldResultPageGraph"></chart>
        </ng-container>

        <ng-container *ngIf="data.fieldDynamicGraph">
          <chart [data]="data.fieldDynamicGraph"  type="filter"></chart>
        </ng-container>

        <div class="navigation text-center">
          <button role="link" routerLink="/oska-tulemused/ettepanekute-elluviimine" attr.aria-label="{{ 'oska.see_proposals' | translate }}" mat-raised-button color="primary">{{ 'oska.see_proposals' | translate }}</button>
        </div>
        
        <feedback class="sm-hide" [nid]="data.nid"></feedback>

      </div><!--/block-->

    </div><!--/col-8-->
    <div class="col-4 sm-12" *ngIf="sidebarData">
      <oska-areas-sidebar [sidebar]="sidebarData" [viewType]="viewType"></oska-areas-sidebar>
    </div><!--/col-4-->
    <div class="col-4 sm-12 sm-show">
      <feedback class="feedback--sm" [nid]="data.nid"></feedback>
    </div><!--/col-4-->
  </div><!--/row-->
</div><!--/main-container-->