<div><breadcrumbs *ngIf="!inputData"></breadcrumbs></div>
<div class="main-container">
  <loader *ngIf="!content && !error"></loader>

  <div *ngIf="error" class="text-center">
    <h1>404: Page not found</h1>
    <button mat-raised-button>Go back</button>
  </div><!--/error-->

  <div *ngIf="content">
    <div class="row article-wrapper">
      <div class="col-8 sm-12">
        <div class="article">
          <div class="article-spacer"></div>
          <article [class.extraBottom]="!(content.fieldVideo.length > 0) && !(accordionSection.length > 0) && fieldRightSidebar === null">
            <div class="row title">
              
              <div class="col-12 sm-12 flex">
                <h1 class="mt-0 mb-0">{{ content.title }}</h1>
              </div><!--/col-10-->

              <div class="mininav col-12 flex text-right">
                <favourites *ngIf="!userLoggedOut" [state]="content.isFavorite" [id]="content.nid" [title]="content.title"></favourites>
                <share [title]="content.title"></share>
              </div><!--/col-1-->

            </div><!--/row-->
            <div class="short" *ngIf="content.fieldBody != null" [innerHtml]="content.fieldBodySummary"></div>

            <div *ngIf="content.fieldImage" class="article-image pull-right">
              <img src="{{ content.fieldImage.derivative.url }}" alt="{{ content.fieldImage.alt }}" title="{{ content.fieldImage.title }}" style="max-width:100%;" />
              <div aria-hidden="true" class="image-alt-text" *ngIf="content.fieldImage.title">{{ content.fieldImage.title }}</div>
            </div>
            <div *ngIf="!content.fieldImage && content.fieldVideo && content.fieldVideo.length > 0">
              <video-component [videos]="[content.fieldVideo[0]]"></video-component>
            </div>
            
            <div class="description" [class.sm-top]="!content.fieldImage && content.fieldVideo && content.fieldVideo.length > 0" *ngIf="content.fieldBody != null" [innerHTML]="content.fieldBody.value"></div>
            <iframe *ngIf="content.nid === 56085" src="https://app.powerbi.com/view?r=eyJrIjoiZWQ5MjllODEtNDg0Zi00ZWNjLTlkODMtYjUwODI2NDA5ZjgwIiwidCI6ImI1YTcxNmQ3LWVjNmMtNGQ4NS05OGE3LWI4YjZhNDFlZTc0MiIsImMiOjh9" frameborder="0" allowFullScreen="true"></iframe>
          </article>

          <video-component *ngIf="content.fieldImage && content.fieldVideo && content.fieldVideo.length > 0" [videos]="content.fieldVideo"></video-component>
          <video-component *ngIf="!content.fieldImage && content.fieldVideo && content.fieldVideo.length === 2" [videos]="[content.fieldVideo[1]]"></video-component>
          
          <div class="accordion" *ngIf="accordionSection.length > 0">
            <mat-accordion>
              <mat-expansion-panel
              [expanded]="first || accordionItem.opened ? true : false"
              *ngFor="let accordionItem of accordionSection; let first = first;"
              (afterExpand)="setActivePanelUrl(accordionItem.entity.slug)"
              [id]="accordionItem.entity.slug">
                <mat-expansion-panel-header [expandedHeight]="'2.5rem'" [collapsedHeight]="'2.5rem'">
                  <mat-panel-title>

                    {{accordionItem.entity.fieldAccordionTitle}}

                  </mat-panel-title>
                  <!-- <mat-panel-description></mat-panel-description> -->
                </mat-expansion-panel-header>
                <div class="accordion__body" [innerHTML]="accordionItem.entity.fieldBody.value"></div>
                <div class="accordion__links" *ngIf="accordionItem.entity.fieldRelatedArticle && accordionItem.entity.fieldRelatedArticle.length">
                  <ul class="link-list mt-0 mb-0">
                    <li *ngFor="let articleLink of accordionItem.entity.fieldRelatedArticle"><a href="{{articleLink.url.path}}" [attr.target]="articleLink.url.__typename === 'ExternalUrl' ? '_blank' : ''" attr.aria-label="{{'link.outer' | translate}}"class="link"><span><span class="htm-icon">launch</span></span>{{articleLink.title}}</a></li>
                  </ul>
                </div>
              </mat-expansion-panel>
            </mat-accordion>
          </div>

          <feedback class="sm-hide" [nid]="content.nid"></feedback>
        </div>
      </div>

      <div class="col-4 sm-12" *ngIf="fieldRightSidebar !== null">
        <aside class="sidebar">
          <div class="sidebar__item" *ngIf="fieldAdditional !== null">
            <h1 class="mt-0 sidebar__title"> {{ fieldAdditionalTitle }}</h1>
            <div class="sidebar__paragraph" [innerHTML]="fieldAdditionalBody"></div>
          </div>
          
          <div class="sidebar__item" *ngIf="fieldContactSection !== null">
            <h1 class="mt-0 sidebar__title">Kontakt</h1>
            <div class="sidebar__paragraph">
              <div><span role="text" attr.aria-label="{{'event.organizer | translate'}} {{fieldContactOrganization | translate}}">{{fieldContactOrganization}}</span></div>
              <div><span role="text" attr.aria-label="{{'event.person | translate'}} {{fieldContactPerson | translate}}">{{fieldContactPerson}}</span></div>
              <div><a attr.aria-label="{{'event.phone | translate'}} {{'participantPhone' | translate}}" tabindex="0" href="tel:{{fieldContactPhone}}" alt="" class="sm-show">{{fieldContactPhone}}</a></div>
              <div class="sm-hide"><span role="text" attr.aria-label="{{'event.phone | translate'}} {{fieldContactPhone | translate}}">{{fieldContactPhone}}</span></div>

              <div><a attr.aria-label="{{'e-mail'}} {{fieldContactEmail | translate}}" href="mailto:{{fieldContactEmail}}" alt="">{{fieldContactEmail}}</a></div>
            </div>
          </div>
          
          <div class="sidebar__item" *ngIf="articleLinks.length > 0">
            <h1 class="mt-0 sidebar__title">Leia kiiresti</h1>
            <div class="sidebar__paragraph">
              <ul class="link-list mt-0 mb-0">
                <li *ngFor="let articleLink of articleLinks"><a href="{{articleLink.url.path}}" [attr.target]="articleLink.url.__typename === 'ExternalUrl' ? '_blank' : ''" class="link"><span class="htm-icon">launch</span>{{articleLink.title}}</a></li>
              </ul>
            </div>
          </div>
          
          <div class="sidebar__item" *ngIf="relatedArticles.length > 0">
            <h1 class="mt-0 sidebar__title">Sarnased teemad</h1>
            <div class="sidebar__paragraph">
              <ul class="link-list mt-0 mb-0">
                <li *ngFor="let relatedArticle of relatedArticles">
                  <a href="{{relatedArticle.url.path}}" tabindex="0" [attr.target]="relatedArticle.url.routed ? '' : '_blank'" class="link related">
                    <div>
                      <span *ngIf="relatedArticle.url && relatedArticle.url.routed" class="htm-icon">link</span>
                      <span *ngIf="relatedArticle.url && !relatedArticle.url.routed" class="htm-icon">launch</span>
                    </div>
                    <div>{{relatedArticle.title}}</div>
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <feedback class="feedback--sm sm-show" [nid]="content.nid"></feedback>
        </aside>
      </div>

    </div>
  </div><!--/content-->
</div>