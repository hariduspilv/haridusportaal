<mat-spinner *ngIf="loading.initial === true"></mat-spinner>

<div *ngIf="loading.initial === false">
  <div>
    <h4 class="title-lg-padding">{{ 'frontpage.dashboard_tabs_applications_acceptable_forms_label' | translate }}</h4>
    <span *ngIf="!acceptable_forms_list.length">{{ 'frontpage.dashboard_tabs_applications_acceptable_forms_notfound' | translate }}</span>
    
    <ng-container *ngIf="acceptable_forms_list.length">
      
      <div class="grid-box">
        <ng-container *ngFor="let form of acceptable_forms_list">
          <a [routerLink]="[compileXjsonLink(form.form_name)]" class="grid-item">
            <span *ngIf="form.title" class="grid-link">{{ selectLanguage(form.title) }}</span>
          </a>
        </ng-container>
      </div>
      
      <div class="grid-load" *ngIf="data.acceptable_forms.length > 4 && acceptable_forms_list.length == 4 && acceptable_forms_list_restricted == true">
        <a href="javascript:void(0);" (click)="toggleAcceptableFormsList()">+ {{ 'button.show_more' | translate }} ({{ data.acceptable_forms.length - 4 }})</a>
      </div>
      
      <div class="grid-load" *ngIf="acceptable_forms_list_restricted == false">
        <a href="javascript:void(0);" (click)="toggleAcceptableFormsList()">- {{ 'button.show_less' | translate }}</a>
      </div>
    </ng-container>
  </div>
<div>
  <h4>{{ 'frontpage.dashboard_tabs_applications_drafts_label' | translate }}</h4>
  
  <table class="dashboard-table" *ngIf="!data.drafts.length">
    <thead>
      <tr>
        <th>{{ 'frontpage.dashboard_tabs_applications_document_name' | translate }}</th>
      <th></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="text-center font-normal" colspan="2">{{ 'frontpage.dashboard_tabs_applications_drafts_notfound' | translate }}</td>
      </tr>
    </tbody>
  </table>
  
  
  <div class="scrollable scrollable__applications" *ngIf="data.drafts.length">
    <div aria-hidden="true" class="scrollable__rectangle scrollable__rectangle--left pointer" *ngIf="!elemAtStart[0]" 
      (touchstart)="tableService.scrollStart('table_0')" 
      (mousedown)="tableService.scrollStart('table_0')" 
      (touchend)="tableService.scrollEnd()" 
      (mouseup)="tableService.scrollEnd()">
      <span class="htm-icon">keyboard_arrow_left</span>
    </div>
    <div aria-hidden="true" class="scrollable__rectangle scrollable__rectangle--right pointer" *ngIf="tableOverflown[0]" 
      (touchstart)="tableService.scrollStart('table_0', true)"
      (mousedown)="tableService.scrollStart('table_0', true)"
      (touchend)="tableService.scrollEnd(true)"
      (mouseup)="tableService.scrollEnd(true)">
      <span class="htm-icon">keyboard_arrow_right</span>
    </div>
    <div class="scrollable__table" [attr.id]="'table_0'" (scroll)="tableOverflown[0] = tableService.isOverflownWhileScrolling($event); elemAtStart[0] = tableService.isElemAtStart('table_0')">
      <table class="dashboard-table scrollableTable">
        <thead>
          <tr>
            <th>{{ 'frontpage.dashboard_tabs_applications_document_name' | translate }}</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let form of data.drafts">
            <td><ng-container *ngIf="form.title">{{ selectLanguage(form.title) }}</ng-container></td>
            <td class="text-center">
              <a *ngIf="form.form_name" [routerLink]="[compileXjsonLink(form.form_name)]" [queryParams]="{draft:'true', identifier: form.identifier}">
                {{ 'button.continue_filling' | translate }}
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div>
  <h4>{{ 'frontpage.dashboard_tabs_applications_documents_label' | translate }}</h4>
  
  
  <div class="scrollable scrollable__applications" *ngIf="!data.documents.length">
    <div aria-hidden="true" class="scrollable__rectangle scrollable__rectangle--left pointer" *ngIf="!elemAtStart[1]" 
      (touchstart)="tableService.scrollStart('table_1')" 
      (mousedown)="tableService.scrollStart('table_1')" 
      (touchend)="tableService.scrollEnd()" 
      (mouseup)="tableService.scrollEnd()">
      <span class="htm-icon">keyboard_arrow_left</span>
    </div>
    <div aria-hidden="true" class="scrollable__rectangle scrollable__rectangle--right pointer" *ngIf="tableOverflown[1]" 
      (touchstart)="tableService.scrollStart('table_1', true)"
      (mousedown)="tableService.scrollStart('table_1', true)"
      (touchend)="tableService.scrollEnd(true)"
      (mouseup)="tableService.scrollEnd(true)">
      <span class="htm-icon">keyboard_arrow_right</span>
    </div>
    <div class="scrollable__table" [attr.id]="'table_1'" (scroll)="tableOverflown[1] = tableService.isOverflownWhileScrolling($event); elemAtStart[1] = tableService.isElemAtStart('table_1')">
      <table class="dashboard-table scrollableTable">
        <thead>
          <tr>
            <th>{{ 'frontpage.dashboard_tabs_applications_document_name' | translate }}</th>
            <th>{{ 'frontpage.dashboard_tabs_applications_document_date' | translate }}</th>
            <th>{{ 'frontpage.dashboard_tabs_applications_document_status' | translate }}</th>
            <th></th>
          </tr>
        </thead> 
        <tbody>
          <tr>
            <td class="text-center font-normal" colspan="4">{{ 'frontpage.dashboard_tabs_applications_documents_notfound' | translate }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  
  
  <div class="scrollable scrollable__applications" *ngIf="data.documents.length">
    <div aria-hidden="true" class="scrollable__rectangle scrollable__rectangle--left pointer" *ngIf="!elemAtStart[1]" 
      (touchstart)="tableService.scrollStart('table_1')" 
      (mousedown)="tableService.scrollStart('table_1')" 
      (touchend)="tableService.scrollEnd()" 
      (mouseup)="tableService.scrollEnd()">
      <span class="htm-icon">keyboard_arrow_left</span>
    </div>
    <div aria-hidden="true" class="scrollable__rectangle scrollable__rectangle--right pointer" *ngIf="tableOverflown[1]" 
      (touchstart)="tableService.scrollStart('table_1', true)"
      (mousedown)="tableService.scrollStart('table_1', true)"
      (touchend)="tableService.scrollEnd(true)"
      (mouseup)="tableService.scrollEnd(true)">
      <span class="htm-icon">keyboard_arrow_right</span>
    </div>
    <div class="scrollable__table" [attr.id]="'table_1'" (scroll)="tableOverflown[1] = tableService.isOverflownWhileScrolling($event); elemAtStart[1] = tableService.isElemAtStart('table_1')">
      <table class="dashboard-table scrollableTable">
        <thead>
          <tr>
            <th>{{ 'frontpage.dashboard_tabs_applications_document_name' | translate }}</th>
            <th>{{ 'frontpage.dashboard_tabs_applications_document_date' | translate }}</th>
            <th>{{ 'frontpage.dashboard_tabs_applications_document_status' | translate }}</th>
            <th></th>
          </tr>
        </thead> 
        <tbody>
          <ng-container *ngFor="let form of data.documents">
            <tr [class.description]="form.description" >
              <td><ng-container *ngIf="form.title">{{ selectLanguage(form.title) }}</ng-container></td>
              <td><span *ngIf="form.document_date">{{ form.document_date }}</span></td>
              <td><span *ngIf="form.status">{{ form.status }}</span></td>
              <td class="text-center">
                <a *ngIf="form.form_name" [routerLink]="[compileXjsonLink(form.form_name)]" [queryParams]="{existing:'true', identifier: form.identifier}">
                  {{ 'button.open' | translate }}
                </a>
              </td>
            </tr>
            <tr class="description-bottom" *ngIf="form.description">
              <td colspan="4"><p>{{ form. description }}</p></td>
            </tr>
          </ng-container>
          
        </tbody>
      </table>
    </div>
  </div>
</div>
</div>