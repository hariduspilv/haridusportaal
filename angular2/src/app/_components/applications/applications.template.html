<mat-spinner *ngIf="loading.initial === true"></mat-spinner>

<div *ngIf="loading.initial === false">
  <div>
    <h4 class="title-lg-padding">{{ 'frontpage.dashboard_tabs_applications_acceptable_forms_label' | translate }}</h4>
    <span *ngIf="!acceptable_forms_list.length">{{ 'frontpage.dashboard_tabs_applications_acceptable_forms_notfound' | translate }}</span>

    <ng-container *ngIf="acceptable_forms_list.length">
      
      <div class="grid-box">
        <ng-container *ngFor="let form of acceptable_forms_list">
          <a [routerLink]="[compileXjsonLink(form.form_name)]" class="grid-item">
              <span *ngIf="form.title" class="grid-link">{{ selectLanguage(form.title) }}</span>
          </a>
        </ng-container>
      </div>


      <a class="grid-load" *ngIf="data.acceptable_forms.length > 4 && acceptable_forms_list.length == 4 && acceptable_forms_list_restricted == true" 
        href="javascript:void(0);" (click)="toggleAcceptableFormsList()">
        + {{ 'button.show_more' | translate }} ({{ data.acceptable_forms.length - 4 }})
      </a>

      <a class="grid-load" *ngIf="acceptable_forms_list_restricted == false" 
          href="javascript:void(0);" (click)="toggleAcceptableFormsList()">
          {{ 'button.show_less' | translate }}
      </a>
    </ng-container>
  </div>

  <div>
    <h4>{{ 'frontpage.dashboard_tabs_applications_drafts_label' | translate }}</h4>

    <table class="dashboard-table" *ngIf="!data.drafts.length">
      <tbody>
        <tr>
          <th colspan="2">{{ 'frontpage.dashboard_tabs_applications_document_name' | translate }}</th>
        </tr>
        <tr>
          <td colspan="2">{{ 'frontpage.dashboard_tabs_applications_drafts_notfound' | translate }}</td>
        </tr>
      </tbody>
    </table>



    <table class="dashboard-table" *ngIf="data.drafts.length">
      <tbody>
        <tr>
          <th>{{ 'frontpage.dashboard_tabs_applications_document_name' | translate }}</th>
          <th></th>
        </tr>
        <tr *ngFor="let form of data.drafts">
          <td><ng-container *ngIf="form.title">{{ selectLanguage(form.title) }}</ng-container></td>
          <td class="text-center">
            <a *ngIf="form.form_name" [routerLink]="[compileXjsonLink(form.form_name)]" [queryParams]="{draft:'true', identifier: form.identifier}">
              {{ 'button.continue_filling' | translate }}
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div>
    <h4>{{ 'frontpage.dashboard_tabs_applications_documents_label' | translate }}</h4>
    <span *ngIf="!data.documents.length">{{ 'frontpage.dashboard_tabs_applications_documents_notfound' | translate }}</span>

    <table  class="dashboard-table" *ngIf="data.documents.length">
      <thead>
        <tr>
          <th>{{ 'frontpage.dashboard_tabs_applications_document_name' | translate }}</th>
          <th>{{ 'frontpage.dashboard_tabs_applications_document_date' | translate }}</th>
          <th>{{ 'frontpage.dashboard_tabs_applications_document_status' | translate }}</th>
          <th></th>
        </tr>
      </thead> 
      <tbody>
        <ng-container *ngFor="let form of data.documents">
          <tr [class.description]="form.description" >
            <td><ng-container *ngIf="form.title">{{ selectLanguage(form.title) }}</ng-container></td>
            <td><span *ngIf="form.document_date">{{ form.document_date }}</span></td>
            <td><span *ngIf="form.status">{{ form.status }}</span></td>
            <td class="text-center">
              <a *ngIf="form.form_name" [routerLink]="[compileXjsonLink(form.form_name)]" [queryParams]="{existing:'true', identifier: form.identifier}">
                {{ 'button.open' | translate }}
              </a>
            </td>
          </tr>
          <tr class="description-bottom" *ngIf="form.description">
            <td colspan="4"><p>{{ form. description }}</p></td>
          </tr>
        </ng-container>

      </tbody>
    </table>
  </div>
</div>