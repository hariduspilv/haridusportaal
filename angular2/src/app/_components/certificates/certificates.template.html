<div class="accordion">
  <more-block id="1" content="{{ 'abitekst.tunnistused' | translate }}"></more-block>
  <h2 class="section--header">{{ 'frontpage.certificates_data' | translate }}</h2>
  <mat-accordion multi>
    <ng-container *ngFor="let accordionItem of accordionSection; let first = first; let ind = index;">
      <mat-expansion-panel [expanded]="accordionStates[ind]" (opened)="dataController(accordionItem._id)">
        <mat-expansion-panel-header [expandedHeight]="'2.5rem'" [collapsedHeight]="'2.5rem'" (click)="accordionStates[ind] = !accordionStates[ind]">
          <mat-panel-title>
            {{ accordionItem.label | translate }}
          </mat-panel-title>
          <!-- <mat-panel-description></mat-panel-description> -->
        </mat-expansion-panel-header>

        <div class="col-12" *ngIf="loading[accordionItem._id]">
            <loader></loader>
        </div><!--/col-12-->

        <ng-container *ngIf="!loading[accordionItem._id]">

          <ng-container *ngIf="accordionItem._id === 'professional-certificates'">
            <p class="text-center text--substrong--head mb-0" *ngIf="error && !certificateErr">{{ 'frontpage.dashboard_tabs_certificates_error_technical' | translate }}</p>
            <p class="text-center text--substrong--head mb-0" *ngIf="error && certificateErr">{{ certificateErr }}</p>
            <p *ngIf="professionalCertificates && professionalCertificates.length < 1" class="text-center text--substrong--head mb-0">{{ 'frontpage.dashboard_tabs_certificates_no_results' | translate }}</p>
            <table class="dashboard-table" *ngIf="!error && professionalCertificates && professionalCertificates.length > 0">
              <tbody>
                  <tr *ngFor="let certificate of professionalCertificates">
                    <td>{{ certificate.nimi }}</td>
                    <td>{{ certificate.valjaantud }}</td>
                    <td class="text-center"><a [routerLink]="[certificate.path]">{{ 'button.view_more' | translate }}</a></td>
                  </tr>
              </tbody>
            </table>
          </ng-container>

          <ng-container *ngIf="accordionItem._id === 'state-exams'">
            <ng-container *ngIf="examResultsErr || errRequest">
              <p class="text-center text--substrong--head mb-0" *ngIf="examResultsErr">{{ examResultsErr }}</p>
              <p class="text-center text--substrong--head mb-0" *ngIf="errRequest">{{ 'errors.examinations_data_request' | translate }}</p>
            </ng-container>
            <table class="dashboard-table" *ngIf="!examResultsErr && !errRequest">
              <thead>
                <tr>
                  <th>{{'frontpage.eksamiNimetus' | translate}}</th>
                  <th>{{'frontpage.aasta' | translate}}</th>
                  <th aria-hidden="true"></th>
                </tr>
              </thead>
              <tbody>
                  <tr *ngFor="let session of examResults">
                    <td>{{ session.nimi }}</td>
                    <td>{{ session.oppeaasta }}</td>
                    <td class="text-center"><a [routerLink]="[session.testsessioon_id]" [queryParams]="{exams: session.oppeaasta}">{{ 'button.view_more' | translate }}</a></td>
                  </tr>
              </tbody>
            </table>
          </ng-container>

        </ng-container><!--end of *ngIf="!loading[accordionItem._id]"-->
      </mat-expansion-panel>
    </ng-container>
  </mat-accordion>
</div>
