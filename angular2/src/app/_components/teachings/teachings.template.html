
<div class="accordion">
  <h2 class="section--header">{{ 'frontpage.teachings_data' | translate }}</h2>
  <mat-spinner *ngIf="loading && !error"></mat-spinner>
  <!-- <div class="error" *ngIf="error" role="alert">
    <span *ngIf="dataErr">{{ 'errors.teachings_data_missing' | translate }}</span>
    <span *ngIf="requestErr">{{ 'errors.teachings_data_request' | translate }}</span>
  </div> -->
  <notifications [id]="'teachings'" class="notifications notifications--small"></notifications>
  <mat-accordion multi *ngIf="!loading && content && !error">
    
    <!-- contentType -->
    <ng-container *ngFor="let type of contentTypes; let first = first; let ind = index;">
      <mat-expansion-panel id="{{ind}}" [expanded]="accordionStates[ind]" *ngIf="content[type] && content[type].length">
        <mat-expansion-panel-header [expandedHeight]="'2.5rem'" [collapsedHeight]="'2.5rem'" (click)="accordionStates[ind] = !accordionStates[ind]">
          <mat-panel-title>
            {{ parseTypeTranslation(type) | translate }}
          </mat-panel-title>
        </mat-expansion-panel-header>
  
        <ng-container>
          <table class="dashboard-table dashboard-table--equalCells" *ngIf="!error">
            <tbody>
              <tr *ngFor="let work of content[type];">
                <td>{{ work.oppeasutus }}</td>
                <td class="text-center"><a href="javascript:void(0)" (click)="setTeachingsDetail(work, type)">{{ 'button.view_more' | translate }}</a></td>
              </tr>
            </tbody>
          </table>
        </ng-container>
      </mat-expansion-panel>
    </ng-container>
    <!-- contentType -->
    
  </mat-accordion>
</div>
  